"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[665],{1665:(H,_,p)=>{p.r(_),p.d(_,{NewProjectPageModule:()=>O});var c=p(6814),e=p(4946),F=p(5650),C=p(9862),x=p(553);let Z=(()=>{var n;class r{constructor(){this.http=(0,e.f3M)(C.eN),this.api=x.N.api+"files/"}sendFiles(t){return this.http.post(this.api+"upload",{files:t})}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),r})();var m=p(5619),T=p(2096);let f=(()=>{var n;class r{constructor(){this.close=new e.vpe}ngOnInit(){this.url=location.protocol+"//"+this.result.name+".localhost:5000"}onClose(){this.close.emit()}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result"]],inputs:{result:"result"},outputs:{close:"close"},standalone:!0,features:[e.jDz],decls:10,vars:3,consts:[["role","alert",1,"bg-green-100","border","border-green-400","text-green-700","px-4","py-3","rounded","relative"],[1,"font-bold"],[1,"block","sm:inline","ml-4",3,"href"],[1,"absolute","top-0","bottom-0","right-0","px-4","py-3","cursor-pointer",3,"click"],["role","button","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20",1,"fill-current","h-6","w-6","text-green-500"],["d","M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"strong",1),e._uU(2),e.qZA(),e.TgZ(3,"a",2),e._uU(4),e.qZA(),e.TgZ(5,"span",3),e.NdJ("click",function(){return o.onClose()}),e.O4$(),e.TgZ(6,"svg",4)(7,"title"),e._uU(8,"Close"),e.qZA(),e._UZ(9,"path",5),e.qZA()()()),2&t&&(e.xp6(2),e.Oqu(o.result.message),e.xp6(1),e.Q6J("href",o.url,e.LSH),e.xp6(1),e.Oqu(o.result.name))},dependencies:[c.ez]}),r})();const w=["app-folder",""];let y=(()=>{var n;class r{constructor(){this.navigate=new e.vpe,this.delete=new e.vpe}onDeleteItem(){this.delete.emit()}onEnterFolder(){this.navigate.emit()}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["","app-folder",""]],inputs:{folder:"folder",index:"index"},outputs:{navigate:"navigate",delete:"delete"},standalone:!0,features:[e.jDz],attrs:w,decls:12,vars:3,consts:[[1,"index","mr-2"],[1,"name","mr-5","cursor-pointer","hover:underline",3,"click"],[1,"bg-red-700","text-white","px-3","py-1","rounded-md",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"td")(1,"span",0),e._uU(2),e.qZA()(),e.TgZ(3,"td")(4,"span",1),e.NdJ("click",function(){return o.onEnterFolder()}),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e._UZ(8,"td"),e.TgZ(9,"td")(10,"button",2),e.NdJ("click",function(){return o.onDeleteItem()}),e._uU(11," delete "),e.qZA()()),2&t&&(e.xp6(2),e.hij("",o.index+1,"."),e.xp6(3),e.Oqu(o.folder.name),e.xp6(2),e.Oqu(o.folder.type))},dependencies:[c.ez]}),r})();const A=["app-file",""];let N=(()=>{var n;class r{constructor(){this.delete=new e.vpe}onDeleteItem(){this.delete.emit()}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["","app-file",""]],inputs:{file:"file",index:"index"},outputs:{delete:"delete"},standalone:!0,features:[e.jDz],attrs:A,decls:14,vars:4,consts:[[1,"index","mr-2"],[1,"name","mr-5"],[1,"size","mr-10"],[1,"bg-red-700","text-white","px-3","py-1","rounded-md",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"td")(1,"span",0),e._uU(2),e.qZA()(),e.TgZ(3,"td")(4,"span",1),e._uU(5),e.qZA()(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"span",2),e._uU(10),e.qZA()(),e.TgZ(11,"td")(12,"button",3),e.NdJ("click",function(){return o.onDeleteItem()}),e._uU(13," delete "),e.qZA()()),2&t&&(e.xp6(2),e.hij("",o.index+1,"."),e.xp6(3),e.Oqu(o.file.name),e.xp6(2),e.Oqu(o.file.type),e.xp6(3),e.hij("",o.file.file.size," bytes"))},dependencies:[c.ez]}),r})(),b=(()=>{var n;class r{constructor(){this.single=new e.vpe,this.multiple=new e.vpe,this.uploadFolder=new e.vpe,this.createFolder=new e.vpe}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-actions"]],outputs:{single:"single",multiple:"multiple",uploadFolder:"uploadFolder",createFolder:"createFolder"},standalone:!0,features:[e.jDz],decls:9,vars:0,consts:[[1,"flex","space-x-2"],["type","button",1,"bg-blue-500","text-white","px-3","py-1","rounded-md",3,"click"],["type","button",1,"bg-blue-700","text-white","px-3","py-1","rounded-md",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"section",0)(1,"button",1),e.NdJ("click",function(){return o.uploadFolder.emit()}),e._uU(2," Upload Folder "),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return o.multiple.emit()}),e._uU(4," Add Files "),e.qZA(),e.TgZ(5,"button",1),e.NdJ("click",function(){return o.single.emit()}),e._uU(6," Add File "),e.qZA(),e.TgZ(7,"button",2),e.NdJ("click",function(){return o.createFolder.emit()}),e._uU(8," Create Folder "),e.qZA()())},dependencies:[c.ez]}),r})();function J(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"section",1),e.NdJ("click",function(){const l=e.CHM(i).index,s=e.oxw();return e.KtG(s.onNavigate(l+1))}),e._uU(1),e.qZA()}if(2&n){const i=r.$implicit;e.xp6(1),e.hij(" ",i.name," > ")}}let k=(()=>{var n;class r{constructor(){this.navigate=new e.vpe}onNavigate(t){this.navigate.emit(t)}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-navigation"]],inputs:{navigation:"navigation"},outputs:{navigate:"navigate"},standalone:!0,features:[e.jDz],decls:4,vars:1,consts:[[1,"inline-flex","my-2","border","border-black-500","px-2","py-1","rounded-md","space-x-1"],[1,"hover:text-blue-500","cursor-pointer",3,"click"],["class","hover:text-blue-500 cursor-pointer",3,"click",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(e.TgZ(0,"nav",0)(1,"section",1),e.NdJ("click",function(){return o.onNavigate(0)}),e._uU(2," Home > "),e.qZA(),e.YNc(3,J,2,1,"section",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",o.navigation))},dependencies:[c.ez,c.sg]}),r})();function U(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"tr",18),e.NdJ("delete",function(){e.CHM(i);const o=e.oxw().index,l=e.oxw(3);return e.KtG(l.onDeleteItem(o))}),e.qZA()}if(2&n){const i=e.oxw(),o=i.index;e.Q6J("file",i.$implicit)("index",o)}}function q(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"tr",19),e.NdJ("navigate",function(){e.CHM(i);const o=e.oxw(),l=o.$implicit,s=o.index,a=e.oxw(3);return e.KtG(a.onEnterFolder(l,s))})("delete",function(){e.CHM(i);const o=e.oxw().index,l=e.oxw(3);return e.KtG(l.onDeleteItem(o))}),e.qZA()}if(2&n){const i=e.oxw(),o=i.index;e.Q6J("folder",i.$implicit)("index",o)}}function I(n,r){if(1&n&&(e.ynx(0),e.YNc(1,U,1,2,"tr",16),e.YNc(2,q,1,2,"tr",17),e.BQk()),2&n){const i=r.$implicit;e.xp6(1),e.Q6J("ngIf","file"==i.type),e.xp6(1),e.Q6J("ngIf","folder"==i.type)}}function M(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1,"No Files"),e.qZA())}function j(n,r){if(1&n&&(e.TgZ(0,"table",13),e.YNc(1,I,3,2,"ng-container",14),e.YNc(2,M,2,0,"p",15),e.qZA()),2&n){const i=r.ngIf;e.xp6(1),e.Q6J("ngForOf",i),e.xp6(1),e.Q6J("ngIf",!i.length)}}function P(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"div",10)(1,"app-navigation",11),e.NdJ("navigate",function(o){e.CHM(i);const l=e.oxw();return e.KtG(l.onNavigate(o))}),e.qZA(),e.YNc(2,j,3,2,"table",12),e.ALo(3,"async"),e.qZA()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("navigation",i.navigation),e.xp6(1),e.Q6J("ngIf",e.lcZ(3,2,i.view$))}}let g=(()=>{var n;class r{constructor(){this.navigation=[],this.files=[],this.view$=new m.X(this.files)}onDeleteItem(t){confirm("Are you sure?")&&this.getCurrentFolder().splice(t,1)}onCreateFolder(){let t=prompt("Folder name");if(!t?.trim())return alert("Folder name must be not empty");this.addItemInFolder({id:Date.now(),type:"folder",name:t,files:[]}),this.setFolder()}onUpload(t){Array.from(t.files).forEach(o=>{this.addItemInFolder({id:Date.now(),type:"file",name:o.name,file:o})}),t.value="",this.setFolder()}onUploadFolder(t){Array.from(t.files).forEach(o=>{let l=o.webkitRelativePath.split("/");l.shift(),this.uploadFolderItems(o,l)}),this.setFolder(),t.value=""}uploadFolderItems(t,o=[]){o.reduce((l,s,a,E)=>{if(E.length!=a+1){let h=l.find(d=>d.name==s&&"folder"==d.type);if(h)return h.files;{let d={id:Date.now(),type:"folder",name:s,files:[]};return l.push(d),l.find(v=>v.id==d.id&&"folder"==v.type).files}}l.push({id:Date.now(),type:"file",name:t.name,file:t})},this.getCurrentFolder())}getCurrentFolder(){return this.navigation.length?this.getDepthArray().reduce((t,o,l,s)=>{const a=t[o];return console.log(t,o),s.length==l+1&&a?t[o].files:a?a.files:{}},this.files):this.files}addItemInFolder(t){if(!this.navigation.length)return this.files.push(t);this.getCurrentFolder().push(t)}onEnterFolder(t,o){this.navigation.push({name:t.name,index:o}),this.view$.next(t.files)}onNavigate(t){this.navigation=this.navigation.slice(0,t),this.setFolder()}setFolder(){this.navigation.length||this.view$.next(this.files),this.view$.next(this.files),this.navigation.forEach(t=>{this.view$.next(this.view$.value[t.index].files)})}getDepthArray(){if(!this.navigation.length)return[];let t=[];return this.navigation.forEach(o=>{t.push([o.index])}),t}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-files"]],inputs:{files:"files"},standalone:!0,features:[e.jDz],decls:12,vars:3,consts:[[1,"mt-5","flex","flex-col"],[1,"text-3xl","mb-2"],[3,"single","multiple","uploadFolder","createFolder"],["class","files",4,"ngIf"],["type","file","multiple","",1,"hidden",3,"change"],["multiple",""],["type","file","webkitdirectory","","mozdirectory","",1,"hidden",3,"change","click"],["directory",""],["type","file",1,"hidden",3,"change"],["single",""],[1,"files"],[3,"navigation","navigate"],["class","w-full",4,"ngIf"],[1,"w-full"],[4,"ngFor","ngForOf"],[4,"ngIf"],["app-file","",3,"file","index","delete",4,"ngIf"],["app-folder","","class","bg-gray-100",3,"folder","index","navigate","delete",4,"ngIf"],["app-file","",3,"file","index","delete"],["app-folder","",1,"bg-gray-100",3,"folder","index","navigate","delete"]],template:function(t,o){if(1&t){const l=e.EpF();e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Files"),e.qZA(),e.TgZ(3,"app-actions",2),e.NdJ("single",function(){e.CHM(l);const a=e.MAs(11);return e.KtG(a.click())})("multiple",function(){e.CHM(l);const a=e.MAs(7);return e.KtG(a.click())})("uploadFolder",function(){e.CHM(l);const a=e.MAs(9);return e.KtG(a.click())})("createFolder",function(){return o.onCreateFolder()}),e.qZA(),e.YNc(4,P,4,4,"div",3),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"input",4,5),e.NdJ("change",function(){e.CHM(l);const a=e.MAs(7);return e.KtG(o.onUpload(a))}),e.qZA(),e.TgZ(8,"input",6,7),e.NdJ("change",function(){e.CHM(l);const a=e.MAs(9);return e.KtG(o.onUploadFolder(a))})("click",function(){e.CHM(l);const a=e.MAs(9);return e.KtG(o.onUploadFolder(a))}),e.qZA(),e.TgZ(10,"input",8,9),e.NdJ("change",function(){e.CHM(l);const a=e.MAs(11);return e.KtG(o.onUpload(a))}),e.qZA()}2&t&&(e.xp6(4),e.Q6J("ngIf",e.lcZ(5,1,o.view$)))},dependencies:[c.ez,c.sg,c.O5,c.Ov,N,y,b,k]}),r})();var u=p(95);function D(n,r){if(1&n){const i=e.EpF();e.TgZ(0,"app-result",9),e.NdJ("close",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.onCloseResult())}),e.qZA()}2&n&&e.Q6J("result",r.ngIf)}let z=(()=>{var n;class r{constructor(){this.navigation=[],this.filesService=(0,e.f3M)(Z),this.projectsService=(0,e.f3M)(F.m),this.files=[],this.view$=new m.X(this.files)}onSubmit(t){if(!this.checkName(t.value.name))return alert("Invalid Project Name");let o=this.resolveFiles(),l=new FormData;l.append("name",t.value.name),l.append("index",t.value.index);for(const s of o)l.append(s.path,s.file);this.result$=this.projectsService.createProject(l)}resolveFiles(t=this.files,o=""){let l=[];for(const s of t)"file"==s.type?l.push({file:s.file,path:o}):l.push(...this.resolveFiles(s.files,o+"/"+s.name+"/"));return l}onCloseResult(){this.result$=(0,T.of)(null)}checkName(t){return/^[a-zA-Z0-9]+$/.test(t)}}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-project-page"]],decls:12,vars:4,consts:[[3,"result","close",4,"ngIf"],[1,"mt-4",3,"submit"],["form","ngForm"],[1,"text-4xl","mb-4"],[1,"flex","space-x-3"],["name","name","ngModel","","placeholder","Name",1,"bg-gray-100","border","rounded-md","px-3","py-2"],["name","index","ngModel","","value","index.html","placeholder","Entry Point",1,"bg-gray-100","border","rounded-md","px-3","py-2"],["type","submit",1,"right","bg-teal-500","text-white","px-4","py-2","rounded-md"],[3,"files"],[3,"result","close"]],template:function(t,o){if(1&t){const l=e.EpF();e.YNc(0,D,1,1,"app-result",0),e.ALo(1,"async"),e.TgZ(2,"form",1,2),e.NdJ("submit",function(){e.CHM(l);const a=e.MAs(3);return e.KtG(o.onSubmit(a.form))}),e.TgZ(4,"h1",3),e._uU(5,"Add app"),e.qZA(),e.TgZ(6,"div",4),e._UZ(7,"input",5)(8,"input",6),e.TgZ(9,"button",7),e._uU(10," Submit "),e.qZA()(),e._UZ(11,"app-files",8),e.qZA()}2&t&&(e.Q6J("ngIf",e.lcZ(1,2,o.result$)),e.xp6(11),e.Q6J("files",o.files))},dependencies:[c.O5,f,g,u._Y,u.Fj,u.JJ,u.JL,u.On,u.F,c.Ov]}),r})();var $=p(9310);let O=(()=>{var n;class r{}return(n=r).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,f,g,u.u5,$.Bz.forChild([{path:"",component:z}])]}),r})()}}]);